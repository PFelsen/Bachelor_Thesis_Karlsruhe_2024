# ------- Create Directories -------
file(COPY ${PROJECT_SOURCE_DIR}/conf DESTINATION ${CMAKE_BINARY_DIR}/)
file(MAKE_DIRECTORY ${PROJECT_BINARY_DIR}/tests/data/vtk)
file(MAKE_DIRECTORY ${PROJECT_BINARY_DIR}/tests/data/py)
file(MAKE_DIRECTORY ${PROJECT_BINARY_DIR}/tests/data/vtu)
file(MAKE_DIRECTORY ${PROJECT_BINARY_DIR}/tests/log)

# ------- Unit Tests -------
# Todo make all parallel tests!
if (USE_TASMANIAN)
    add_mpp_test(generators/TestSparseGridGenerator LIB_UQ)
endif ()
add_mpp_test(generators/TestKLExpansionGenerator LIB_UQ)
add_mpp_test(TestPlotting LIB_UQ)
add_mpp_test(estimators/TestEstimatorMap LIB_UQ)

# ------- MPI Tests -------
add_mpi_test(generators/TestSPRNG5 LIB_UQ)
add_mpi_test(generators/TestRandom LIB_UQ)
add_mpi_test(generators/TestSymmetricCovariance LIB_UQ)
add_mpi_test(generators/TestCirculantEmbedding LIB_UQ)
add_mpi_test(estimators/TestMonteCarlo LIB_UQ)
add_mpi_test(estimators/TestMultilevelMonteCarlo LIB_UQ)
add_mpi_test(estimators/TestSingleLevelEstimator LIB_UQ)
add_mpi_test(TestMainMLMCExperiment LIB_UQ)
add_mpi_test(TestSGDMain LIB_UQ)

# SMC tests -> TODO: make them parallel and revive them
#add_mpp_test(smc/TestSMCInverseModel LIB_UQ)
#add_mpp_test(smc/TestSMCResampling LIB_UQ)
#add_mpp_test(smc/TestSMCMetropolis LIB_UQ)
#add_mpp_test(smc/TestSMCKLExpansion LIB_UQ)
#add_mpp_test(smc/TestSMCProposal LIB_UQ)
#add_mpp_test(smc/TestSMCQOI LIB_UQ)
#add_mpp_test(smc/TestSMCLinks LIB_UQ)
#add_mpp_test(smc/TestSMC LIB_UQ)
#add_mpp_test(smc/TestSMCGoodnessOfFit LIB_UQ)
#add_mpp_test(smc/TestSMCTargetDistributions LIB_UQ)
#add_mpp_test(smc/TestOtherTools LIB_UQ)
#
#add_mpp_test(smc/TestSMCMain LIB_UQ)
#add_mpp_test(smc/NoPDEMCMCBurnIn0 LIB_UQ)
#add_mpp_test(smc/PriorChoice0 LIB_UQ)
#add_mpp_test(smc/MCMCProposal0 LIB_UQ)
#add_mpp_test(smc/SMCRatioIJ0 LIB_UQ)
#add_mpp_test(smc/SMCRatioIM0 LIB_UQ)
#add_mpp_test(smc/SMCESS0 LIB_UQ)
#add_mpp_test(smc/SMCConvergenceM0 LIB_UQ)

#TestSMCInverseModel (Failed)
#TestSMCResampling (SEGFAULT)
#TestSMCLinks (Failed)
#TestSMC (Failed)
#NoPDEMCMCBurnIn0 (Failed)
#PriorChoice0 (Failed)
#MCMCProposal0 (Failed)
#SMCRatioIJ0 (Failed)
#SMCRatioIM0 (Failed)
#SMCESS0 (Failed)
#SMCConvergenceM0 (Failed)